<%-include('header') -%>


    <div class="off_canvars_overlay"></div>
    <!--offcanvas menu area end-->
    <body>
    <%-include('headsection') -%>
     
    <style>
        /* Add your CSS styles here */
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f4;
            margin: 0;
            padding: 0;
        }
    
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
    
        h1 {
            text-align: center;
            margin-bottom: 30px;
        }
    
        /* Product Card Styles */
        .product-card {
            border: 1px solid #ccc;
            background-color: #fff;
            margin: 10px;
            padding: 10px; /* Adjusted padding */
            text-align: center;
            width: 30%; /* Adjusted width for smaller cards */
            display: inline-block;
            vertical-align: top;
        }
    
        .product-card img {
            max-width: 100%;
            height: auto;
        }
    
        .product-title {
            font-weight: bold;
            margin-top: 10px;
        }
    
        .product-description {
            margin-top: 10px;
        }
    
        .product-price {
            font-size: 18px;
            margin-top: 10px;
        }
    
        /* Pagination Styles */
        .pagination {
            text-align: center;
            margin-top: 20px;
        }
    
        .pagination a {
            text-decoration: none;
            padding: 5px 10px;
            border: 1px solid #ccc;
            margin: 5px;
        }
    
        /* Sorting Styles */
        .sorting {
            text-align: center;
            margin-bottom: 20px;
        }
    
        .sorting select {
            padding: 5px;
        }

        .rounded-button {
    background-color: black;
    color: white;
    border: none;
    border-radius: 20px; /* Adjust the radius for desired roundness */
    padding: 10px 20px; /* Adjust padding as needed */
    cursor: pointer;
}
    </style>
    <!-- Start All Title Box -->
 <div class="all-title-box">
    <div class="container">
        <div class="row">
            <div class="col-lg-12">
                <h2>SHOP</h2>
                <ul class="breadcrumb">
                    <li class="breadcrumb-item"><a href="/">Home</a></li>
                    <li class="breadcrumb-item active">SHOP</li>
                </ul>
            </div>
        </div>
    </div>
</div>
<!-- End All Title Box -->
        <div class="container">
           
            <!-- Sorting Dropdown -->
             <div class="sorting">
                <label for="sort">Sort by:</label>
                <select name="sortby" id="sortOptions" onchange="sortProducts()" >
                    <option value="relevant" selected="selected">Relevance</option>
                    <option value="desc">Price: High to Low</option>
                    <option value="asc">Price: Low to High</option>
                </select>
            </div> 
            <!-- <div class="filter-icon">Filter &#x25BC;</div> -->
   
  
            
    
            <!-- Product Cards -->
            <% productData.forEach(async(product)  =>{ %>
            <div class="product-card">
                <a href="/prodetail?id=<%= product._id %>"><img src="<%= product.imageUrl[0].url %>" alt=""></a>
                <h3 class="ec-pro-title"> <a href="/prodetail?id=<%= product._id %>"><%= product.name %></a></h5>
                <div class="product-price">₹<%= product.price %></div>
                <div class="product-description"><%= product.description %></div>
                <!-- <a href="#" class="rounded-button" onclick="addTocart('<%=product.id%>')">Add to Cart</a> -->
                <a href="#" class="rounded-button">Add to Wishlist</a>
             

            </div>
            <% }); %>
           
    
            <!-- Pagination -->
            <div class="pagination">
                <a href="#">Previous</a>
                <a href="#">1</a>
                <a href="#">2</a>
                <a href="#">3</a>
                <a href="#">Next</a>
            </div>
        </div>
   
    
   
   </body> 
    
    <!--footer area start-->
    <%-include('footer') -%>
   
<script src="assets/js/user.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.0/jquery.min.js" integrity="sha512-3gJwYpMe3QewGELv8k/BX9vcqhryRdzRMxVfq6ngyWXwo03GFEzjsUm8Q7RZcHPHksttq7/GFoxjCVUjkjvPdw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.0.18/dist/sweetalert2.all.min.js"></script>
<!-- Include jQuery library -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

<!-- Include jQuery Validation plugin -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.19.3/jquery.validate.min.js"></script>

<script src="assets/js/userOrder.js"></script>

<script>
  const sortProducts = async () => {
    console.log("inside function");
    
    const selectElement = document.getElementById("sortOptions");
    const selectedValue = selectElement.value;

    if (selectedValue === 'relevant') {
        location.reload(); // Reload the page for the default sorting
    } else {
        try {
            const response = await fetch('/sortProduct', {
                method: "POST",
                headers: {
                    "Content-Type": "application/json",
                },
                body: JSON.stringify({
                    sort: selectedValue,
                }),
            });

            if (response.ok) {
                const data = await response.json();

                // Call a function to render the sorted products
                renderProducts(data);
            } else {
                console.error('Failed to fetch sorted products');
            }
        } catch (error) {
            console.error(error.message);
        }
    }
}

// Function to render sorted products
function renderProducts(products) {
    const productsContainer = document.getElementById("productsContainer");

    // Clear the existing products in the container
    productsContainer.innerHTML = '';

    // Loop through the sorted products and create HTML elements for each product
    products.forEach(product => {
        const productCard = document.createElement('div');
        productCard.classList.add('product-card');

        const productImage = document.createElement('img');
        productImage.src = product.imageUrl[0].url;
        productImage.alt = '';

        const productTitle = document.createElement('h3');
        const productTitleLink = document.createElement('a');
        productTitleLink.href = `/prodetail?id=${product._id}`;
        productTitleLink.textContent = product.name;
        productTitle.appendChild(productTitleLink);

        const productPrice = document.createElement('div');
        productPrice.classList.add('product-price');
        productPrice.textContent = `₹${product.price}`;

        const productDescription = document.createElement('div');
        productDescription.classList.add('product-description');
        productDescription.textContent = product.description;

        const addToWishlistButton = document.createElement('a');
        addToWishlistButton.classList.add('rounded-button');
        addToWishlistButton.href = '#'; // Modify this to the actual wishlist URL
        addToWishlistButton.textContent = 'Add to Wishlist';

        productCard.appendChild(productImage);
        productCard.appendChild(productTitle);
        productCard.appendChild(productPrice);
        productCard.appendChild(productDescription);
        productCard.appendChild(addToWishlistButton);

        productsContainer.appendChild(productCard);
    });
}




</script>